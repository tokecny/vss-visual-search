{"ast":null,"code":"import _toConsumableArray from\"/Users/pavlov/Documents/GitHub/vss-visual-search/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/pavlov/Documents/GitHub/vss-visual-search/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import CJSWindow from'../../components/gameWindow/cjsWindow/CJSWindow';import useSound from'use-sound';import clickSoundSrc from'../../assets/sound/click.mp3';import combo2SoundSrc from'../../assets/sound/combo2.mp3';import losingSoundSrc from'../../assets/sound/losingStreak.mp3';import moment from'moment';import{Shuffle}from'../../scripts/shuffle';import*as vismem from'../../scripts/vismemCC_simon';import CJSButton from'../../components/gameWindow/cjsWindow/cjsButton/CJSButton';import{saveJSONDataToClientDevice}from'../../uitls/offline';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var myCanvas;var canvasContext;var trialNumber;var currTrial=0;var backgroundColor='#E5E5E5';var stimulusColor=['#9370DB','#3CB4C6','#B2D33D','#F67E4B'];var searchTargetList=[[{description:'สี่เหลี่ยมสีม่วง',color:'#9370DB',shape:'square'},{description:'สี่เหลี่ยมสีฟ้า',color:'#3CB4C6',shape:'square'},{description:'สี่เหลี่ยมสีเขียว',color:'#B2D33D',shape:'square'},{description:'สี่เหลี่ยมสีส้ม',color:'#F67E4B',shape:'square'}],[{description:'วงกลมสีม่วง',color:'#9370DB',shape:'circle'},{description:'วงกลมสีฟ้า',color:'#3CB4C6',shape:'circle'},{description:'วงกลมสีเขียว',color:'#B2D33D',shape:'circle'},{description:'วงกลมสีส้ม',color:'#F67E4B',shape:'circle'}]];var canvasWidth=600;var canvasHeight=600;var squareWidth=45;var squareHeight=45;var radius=squareWidth/2;var positionJitter=8;var centerX;var centerY;var Xspan=canvasWidth/2;var Yspan=canvasHeight/2;var XblockNumber=8;var YblockNumber=6;var Xblock=Xspan*2/XblockNumber;var Yblock=Yspan*2/YblockNumber;var X;var Y;var Xs=[];var Ys=[];var Xtemps=[];var Ytemps=[];var posId=[];var maxSS=Math.floor((XblockNumber*YblockNumber-1)/2);var currSS=2;var initialSetSize=2;// must have same value as currSS\nvar baselineSetsizeAndTarget=[];var allTrialPerBlock=[];var testSetsizeAndTarget=[];var allSetsizeAndTarget=[];var change=NaN;var shapeRand=[];var ori;var col;var oris=[];var cols=[];var checkAns=[];var thatRight='';var responseText='';var countdownText='0';var timeoutList=[];var count=0;var STT;var ET;var allRt=[];var hitRt=[];var correctCount=0;var incorrectCount=0;var targetMatch=[];var allStartTime=[];var allClickTime=[];var allCurrSS=[];var trialDataResult=[];var stimulusDataResult=[];var targetDataResult=[];var setSizeRecord=[];var allSearchMode=[];var version='FITC2';var postEntryResult;function FITC2(props){var navigate=useNavigate();var _useSound=useSound(clickSoundSrc),_useSound2=_slicedToArray(_useSound,1),clickSound=_useSound2[0];var _useSound3=useSound(combo2SoundSrc),_useSound4=_slicedToArray(_useSound3,1),combo2Sound=_useSound4[0];var _useSound5=useSound(losingSoundSrc),_useSound6=_slicedToArray(_useSound5,1),losingSound=_useSound6[0];var _useState=useState(),_useState2=_slicedToArray(_useState,2),searchTarget=_useState2[0],setSearchTarget=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),progressValue=_useState4[0],setProgressValue=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),disabledButton=_useState6[0],setDisabledButton=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isItDone=_useState8[0],setIsItDone=_useState8[1];useEffect(function(){initiateData();createPseudorandomStimuli();return function(){timeoutList.forEach(function(tm){clearTimeout(tm);});};},[]);useEffect(function(){switchSearchMode();},[searchTarget]);function initiateData(){hitRt=[];allRt=[];currSS=2;correctCount=0;incorrectCount=0;count=0;currTrial=0;Xtemps=[];Xs=[];Ytemps=[];Ys=[];posId=[];trialDataResult=[];}function checkStimuliColorSet(){var colorSet=props.userId%4;if(props.userId%2===0){// ถ้า userId เป็นเลขคู่\nif(allSetsizeAndTarget[currTrial][3]===0){setSearchTarget({shape:0,col:colorSet});}else{setSearchTarget({shape:1,col:(colorSet+1)%4});}}else{// ถ้า userId เป็นเลขคี่\nif(allSetsizeAndTarget[currTrial][3]===1){setSearchTarget({shape:1,col:(colorSet+1)%4});}else{setSearchTarget({shape:0,col:colorSet});}}}function createPseudorandomStimuli(){baselineSetsizeAndTarget=[];testSetsizeAndTarget=[];allSetsizeAndTarget=[];var allSetsizeRange=[31];var trialsPerSetsize=80;var targetCondition=2;// target appear or disappear\nvar trialsPerCondition=trialsPerSetsize/targetCondition;var miniBlocks=5;// in test blocks \nvar trialsPerBlock=trialsPerSetsize/miniBlocks;// จำนวน trials ต่อ mini-block\nvar probabilities=[0.9,0.7,0.5,0.3,0.1];// โอกาสการปรากฏของ 1 ในแต่ละ mini-block\n// conjunction search pre-test\nfor(var iSetsize=0;iSetsize<allSetsizeRange.length;iSetsize++){for(var iRep=0;iRep<trialsPerCondition;iRep++){for(var iTarget=0;iTarget<targetCondition;iTarget++){// baselineSetsizeAndTarget[0][3] คือชุดของสีที่จะใช้\nbaselineSetsizeAndTarget.push([allSetsizeRange[iSetsize],iTarget,1,0]);baselineSetsizeAndTarget.push([allSetsizeRange[iSetsize],iTarget,1,1]);}}}Shuffle(baselineSetsizeAndTarget);// ใส่ baselineSetsizeAndTarget เข้าไปใน allSetsSizeAndTarget\nallSetsizeAndTarget=_toConsumableArray(baselineSetsizeAndTarget);// conjunction search 5 mini-blocks \n// ก่อนจะใส่ testSetsizeAndTarget เช็คให้ชัวร์ก่อนว่า allSetsizeAndTarget ไม่ว่างเปล่า\nif(allSetsizeAndTarget.length===baselineSetsizeAndTarget.length){var _allSetsizeAndTarget;// Block 1 (first 5 mini-blocks)\nprobabilities.slice(0,miniBlocks).forEach(function(probability){var _testSetsizeAndTarget;allTrialPerBlock=[];var targetAppear=Math.round(trialsPerBlock*probability);// จำนวนครั้งที่ต้อง push 1\nvar targetAbsent=trialsPerBlock-targetAppear;// ที่เหลือเป็น 0\n// สร้าง array ที่มี 1 และ 0 ตามจำนวนที่คำนวณ ของ ExArray\nvar ExArray=Array(targetAppear).fill(1).concat(Array(targetAbsent).fill(0));// สร้าง array ที่มี 1 และ 0 ตามจำนวนที่คำนวณ ของ GFArray\nvar GFArray=Array(targetAppear).fill(0).concat(Array(targetAbsent).fill(1));for(var _iSetsize=0;_iSetsize<allSetsizeRange.length;_iSetsize++){for(var _iTarget=0;_iTarget<ExArray.length;_iTarget++){allTrialPerBlock.push([allSetsizeRange[_iSetsize],ExArray[_iTarget],1,0]);allTrialPerBlock.push([allSetsizeRange[_iSetsize],GFArray[_iTarget],1,1]);}}// สุ่มให้คละกัน\nShuffle(allTrialPerBlock);(_testSetsizeAndTarget=testSetsizeAndTarget).push.apply(_testSetsizeAndTarget,_toConsumableArray(allTrialPerBlock));});// Block 2 (next 5 mini-blocks)\nprobabilities.slice(0,miniBlocks).forEach(function(probability){var _testSetsizeAndTarget2;allTrialPerBlock=[];var targetAppear=Math.round(trialsPerBlock*probability);// จำนวนครั้งที่ต้อง push 1\nvar targetAbsent=trialsPerBlock-targetAppear;// ที่เหลือเป็น 0\n// สร้าง array ที่มี 1 และ 0 ตามจำนวนที่คำนวณ ของ ExArray\nvar ExArray=Array(targetAppear).fill(0).concat(Array(targetAbsent).fill(1));// สร้าง array ที่มี 1 และ 0 ตามจำนวนที่คำนวณ ของ GFArray\nvar GFArray=Array(targetAppear).fill(1).concat(Array(targetAbsent).fill(0));for(var _iSetsize2=0;_iSetsize2<allSetsizeRange.length;_iSetsize2++){for(var _iTarget2=0;_iTarget2<ExArray.length;_iTarget2++){allTrialPerBlock.push([allSetsizeRange[_iSetsize2],ExArray[_iTarget2],1,0]);allTrialPerBlock.push([allSetsizeRange[_iSetsize2],GFArray[_iTarget2],1,1]);}}// สุ่มให้คละกัน\nShuffle(allTrialPerBlock);(_testSetsizeAndTarget2=testSetsizeAndTarget).push.apply(_testSetsizeAndTarget2,_toConsumableArray(allTrialPerBlock));});// ต่อ testSetsizeAndTarget จาก baselineSetsizeAndTarget ใน allSetsizeAndTarget\n(_allSetsizeAndTarget=allSetsizeAndTarget).splice.apply(_allSetsizeAndTarget,[allSetsizeAndTarget.length,0].concat(_toConsumableArray(testSetsizeAndTarget)));}// กำหนดค่า trialNumber ให้เท่ากับจำนวนข้อทั้งหมด\ntrialNumber=allSetsizeAndTarget.length;checkStimuliColorSet();console.log(allSetsizeAndTarget);}function switchSearchMode(){if(searchTarget){oris=[];cols=[];// conjunction search\nallSearchMode.push('conjunction search');for(var j=0;j<maxSS;j++){oris.push(0);oris.push(1);};if(searchTarget.col===0){for(var k=0;k<maxSS;k++){cols.push(0);cols.push(2);};}else if(searchTarget.col===1){for(var _k=0;_k<maxSS;_k++){cols.push(1);cols.push(3);};}else if(searchTarget.col===2){for(var _k2=0;_k2<maxSS;_k2++){cols.push(2);cols.push(0);};}else if(searchTarget.col===3){for(var _k3=0;_k3<maxSS;_k3++){cols.push(3);cols.push(1);};}if(searchTarget.shape===1){shapeRand=[1];}else{shapeRand=[0];}// if createCanvas() runs before switchSearchMode() the target and distractors position might be overlapped\nif(currTrial===0){// create only one time when the game started\ncreateCanvas();}else if(currTrial===trialNumber/3){timeIntervalPerBlock();}else{initialT(0,allSetsizeAndTarget[currTrial][0]);}}}function createCanvas(){myCanvas=document.getElementById(\"myCanvas\");canvasContext=myCanvas.getContext(\"2d\");centerX=myCanvas.width/2;centerY=myCanvas.height/2;for(var ix=0;ix<XblockNumber;ix++){Xtemps.push(Math.round(Xblock/2)+Xblock*ix-Xspan+centerX);}for(var iy=0;iy<YblockNumber;iy++){Ytemps.push(Math.round(Yblock/2)+Yblock*iy-Yspan+centerY);}for(ix=0;ix<XblockNumber;ix++){for(iy=0;iy<YblockNumber;iy++){Xs.push(Xtemps[ix]);Ys.push(Ytemps[iy]);posId.push(count);count++;}}myCanvas.hidden=false;timeIntervalPerBlock();}function initialT(_waittime,SS){setDisabledButton(false);setSizeRecord.push(SS);vismem.erase(canvasContext);vismem.clear();allCurrSS.push(allSetsizeAndTarget[currTrial][0]);shuffleSS(SS);targetData(squareWidth,ori,col);makeBackground(backgroundColor);makeSearchArray(X,Y,squareWidth,squareHeight,ori,col);stimulusData(realX,realY,squareWidth,ori,col);vismem.drawObjects(canvasContext,vismem.objects);var dT=new Date();STT=dT.getTime();allStartTime.push(thisTime());}function shuffleSS(setSize){Shuffle(posId);X=[];for(var ix=0;ix<setSize+1;ix++){X.push(Xs[posId[ix]]);};Y=[];for(var iy=0;iy<setSize+1;iy++){Y.push(Ys[posId[iy]]);};ori=[];for(var j=0;j<setSize;j++){ori.push(oris[j]);};col=[];for(var _j=0;_j<setSize;_j++){col.push(stimulusColor[cols[_j]]);};// conjunction search\n// check if the target appears or disappears\nif(allSetsizeAndTarget[currTrial][1]===0){// disappears\nori.push(oris[setSize]);col.push(stimulusColor[cols[setSize]]);}else{// appears\nif(oris[setSize]===0){ori.push(1);}else{ori.push(1);}if(cols[setSize]===0){col.push(stimulusColor[2]);}else if(cols[setSize]===1){col.push(stimulusColor[3]);}else if(cols[setSize]===2){col.push(stimulusColor[0]);}else if(cols[setSize]===3){col.push(stimulusColor[1]);}}}function makeBackground(backgroundColor){// Fill background\nvismem.makeRectangle('bg',centerX,centerY,canvasWidth,canvasHeight,false,backgroundColor,backgroundColor);}var realX=[];var realY=[];function makeSearchArray(numarrayX,numarrayY,squareWidth,squareHeight,orienVec,colorVec){for(var i=0;i<orienVec.length;i++){if(orienVec[i]===shapeRand[0]){vismem.makeCircle('c',numarrayX[i]+(Math.random()-0.5)*2*positionJitter,numarrayY[i]+(Math.random()-0.5)*2*positionJitter,radius,false,colorVec[i],colorVec[i]);}else{vismem.makeRectangle('s',numarrayX[i]+(Math.random()-0.5)*2*positionJitter,numarrayY[i]+(Math.random()-0.5)*2*positionJitter,squareHeight,squareWidth,false,colorVec[i],colorVec[i],0,0);}realX.push(numarrayX[i]+(Math.random()-0.5)*2*positionJitter);realY.push(numarrayY[i]+(Math.random()-0.5)*2*positionJitter);}if(searchTarget){// Find Target from Object\nvar find=vismem.objects.find(function(x){return x.id===(searchTarget.shape===0?'s':'c')&&x.color===stimulusColor[searchTarget.col];});change=find?1:0;targetMatch.push(find?true:false);}}function targetData(width,ori,col){var thisShape=\"\";var thisParameterName=\"\";var thisValue=0;var obj_in_trial=[];var obj_to_append;if(shapeRand[0]===1){thisShape=\"circle\";thisParameterName=\"radius\";thisValue=radius;}else{thisShape=\"square\";thisParameterName=\"width\";thisValue=width;}if(searchTarget){obj_to_append={\"shape\":thisShape,\"shapeParams\":{\"parameterName\":thisParameterName,\"value\":thisValue,\"unit\":\"px\"},\"color\":stimulusColor[searchTarget.col]};obj_in_trial.push(obj_to_append);}targetDataResult=obj_in_trial[obj_in_trial.length-1];return targetDataResult;}function stimulusData(x,y,width,ori,col){var thisShape=\"\";var thisParameterName=\"\";var thisValue=0;var obj_in_trial=[];for(var i=0;i<col.length;i++){var obj_to_append=void 0;if(ori[i]===shapeRand[0]){thisShape=\"circle\";thisParameterName=\"radius\";thisValue=radius;}else{thisShape=\"square\";thisParameterName=\"width\";thisValue=width;}obj_to_append={\"type\":\"distractor\",\"display\":{\"shape\":thisShape,\"shapeParams\":{\"parameterName\":thisParameterName,\"value\":thisValue,\"unit\":\"px\"},\"color\":col[i]},\"position\":{\"x\":{\"value\":x[i],\"unit\":\"px\"},\"y\":{\"value\":y[i],\"unit\":\"px\"}}};obj_in_trial.push(obj_to_append);}obj_in_trial[obj_in_trial.length-1].type=\"target\";stimulusDataResult.push(obj_in_trial);return stimulusDataResult;}function trialData(targetMatch,allStartTime,allCurrSS,allClickTime,checkAns,stimulusDataResult,allSearchMode){var thisAns;var obj_in_trial=[];for(var i=0;i<targetMatch.length;i++){var obj_to_append=void 0;if(checkAns[i]==='right'||checkAns[i]==='late'){thisAns=true;}else{thisAns=false;}obj_to_append={\"hasTarget\":targetMatch[i],\"startTime\":allStartTime[i],\"setSize\":allCurrSS[i]+1,\"answerTime\":allClickTime[i],\"AnswerBool\":thisAns,\"stimulusData\":stimulusDataResult[i],\"mode\":allSearchMode[i]};obj_in_trial.push(obj_to_append);}trialDataResult.push(obj_in_trial[obj_in_trial.length-1]);return trialDataResult;}function checkResp(foo){clickSound();var dT2=new Date();ET=dT2.getTime();allClickTime.push(thisTime());var rt=ET-STT;allRt.push(rt);if(change===foo){combo2Sound();thatRight='right';checkAns.push(thatRight);hitRt.push(rt);correctCount++;}else{losingSound();thatRight='wrong';checkAns.push(thatRight);incorrectCount++;}trialDataResult=trialData(targetMatch,allStartTime,allCurrSS,allClickTime,checkAns,stimulusDataResult,allSearchMode);trialIsOver();}function trialIsOver(){vismem.erase(canvasContext);vismem.clear();makeBackground(backgroundColor);vismem.drawObjects(canvasContext,vismem.objects);currTrial=currTrial+1;if(currTrial>=trialNumber){Done();}else{trialConclude();}}function trialConclude(){setDisabledButton(true);vismem.erase(canvasContext);vismem.clear();makeBackground(backgroundColor);vismem.drawObjects(canvasContext,vismem.objects);var textHeight=0;if(thatRight==='wrong'){responseText=\"ผิด\";textHeight=36;}else{responseText=\"ถูก\";textHeight=20;}canvasContext.font=\"120px Sarabun\";var textWidth=canvasContext.measureText(responseText).width;timeoutList.push(setTimeout(function(){var text=vismem.makeText('t',centerX-textWidth/2,centerY+textHeight,responseText,\"Black\",canvasContext.font);vismem.drawText(canvasContext,text);},100),setTimeout(function(){vismem.erase(canvasContext);vismem.clear();makeBackground(backgroundColor);vismem.drawObjects(canvasContext,vismem.objects);},600),setTimeout(function(){checkStimuliColorSet();},900));}function timeIntervalPerBlock(){setDisabledButton(true);vismem.erase(canvasContext);vismem.clear();makeBackground(backgroundColor);vismem.drawObjects(canvasContext,vismem.objects);// ทำเพื่อให้ textWidth คำนวนค่าได้ก่อนที่ 3 2 1 จะขึ้น\ntimeoutList.push(setTimeout(function(){countdownText='0';},100));var textHeight=36;canvasContext.font=\"120px Sarabun\";var textWidth=canvasContext.measureText(countdownText).width;timeoutList.push(setTimeout(function(){countdownText='3';var text=vismem.makeText('t',centerX-textWidth/2,centerY+textHeight,countdownText,\"Black\",canvasContext.font);vismem.drawText(canvasContext,text);},200));timeoutList.push(setTimeout(function(){vismem.erase(canvasContext);vismem.clear();makeBackground(backgroundColor);vismem.drawObjects(canvasContext,vismem.objects);},900));timeoutList.push(setTimeout(function(){countdownText='2';var text=vismem.makeText('t',centerX-textWidth/2,centerY+textHeight,countdownText,\"Black\",canvasContext.font);vismem.drawText(canvasContext,text);},1200));timeoutList.push(setTimeout(function(){vismem.erase(canvasContext);vismem.clear();makeBackground(backgroundColor);vismem.drawObjects(canvasContext,vismem.objects);},1900));timeoutList.push(setTimeout(function(){countdownText='1';var text=vismem.makeText('t',centerX-textWidth/2,centerY+textHeight,countdownText,\"Black\",canvasContext.font);vismem.drawText(canvasContext,text);},2200));timeoutList.push(setTimeout(function(){vismem.erase(canvasContext);vismem.clear();makeBackground(backgroundColor);vismem.drawObjects(canvasContext,vismem.objects);},2900));timeoutList.push(setTimeout(function(){initialT(0,allSetsizeAndTarget[currTrial][0]);},3200));}function Done(){setIsItDone(true);postEntryResult=postEntry();console.log(postEntryResult);saveJSONDataToClientDevice(postEntryResult,\"Subject\".concat(props.userId,\"_\").concat(version,\"_\").concat(thisTime().toString()));backToLanding();}function postEntry(){postEntryResult={\"date\":\"\".concat(thisTime().toString()),\"userId\":props.userId,\"userSession\":version,\"target\":targetDataResult,\"trialData\":trialDataResult,\"stimuliData\":stimulusDataResult};return postEntryResult;}function backToLanding(){navigate('/landing');}return/*#__PURE__*/_jsx(\"div\",{className:\"h-screen w-full bg-slate-50 flex flex-col\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center items-center flex-grow p-5\",children:[/*#__PURE__*/_jsx(CJSWindow,{searchTarget:searchTarget,searchTargetList:searchTargetList,canvasWidth:canvasWidth,canvasHeight:canvasHeight}),/*#__PURE__*/_jsx(CJSButton,{searchTarget:searchTarget,disabledButton:disabledButton,checkResp:checkResp})]})});}export default FITC2;function thisTime(){var thisTime=moment().format('YYYY-MM-DDTkk:mm:ss.SSSSSS');return thisTime;}","map":{"version":3,"names":["useEffect","useState","useNavigate","CJSWindow","useSound","clickSoundSrc","combo2SoundSrc","losingSoundSrc","moment","Shuffle","vismem","CJSButton","saveJSONDataToClientDevice","jsx","_jsx","jsxs","_jsxs","myCanvas","canvasContext","trialNumber","currTrial","backgroundColor","stimulusColor","searchTargetList","description","color","shape","canvasWidth","canvasHeight","squareWidth","squareHeight","radius","positionJitter","centerX","centerY","Xspan","Yspan","XblockNumber","YblockNumber","Xblock","Yblock","X","Y","Xs","Ys","Xtemps","Ytemps","posId","maxSS","Math","floor","currSS","initialSetSize","baselineSetsizeAndTarget","allTrialPerBlock","testSetsizeAndTarget","allSetsizeAndTarget","change","NaN","shapeRand","ori","col","oris","cols","checkAns","thatRight","responseText","countdownText","timeoutList","count","STT","ET","allRt","hitRt","correctCount","incorrectCount","targetMatch","allStartTime","allClickTime","allCurrSS","trialDataResult","stimulusDataResult","targetDataResult","setSizeRecord","allSearchMode","version","postEntryResult","FITC2","props","navigate","_useSound","_useSound2","_slicedToArray","clickSound","_useSound3","_useSound4","combo2Sound","_useSound5","_useSound6","losingSound","_useState","_useState2","searchTarget","setSearchTarget","_useState3","_useState4","progressValue","setProgressValue","_useState5","_useState6","disabledButton","setDisabledButton","_useState7","_useState8","isItDone","setIsItDone","initiateData","createPseudorandomStimuli","forEach","tm","clearTimeout","switchSearchMode","checkStimuliColorSet","colorSet","userId","allSetsizeRange","trialsPerSetsize","targetCondition","trialsPerCondition","miniBlocks","trialsPerBlock","probabilities","iSetsize","length","iRep","iTarget","push","_toConsumableArray","_allSetsizeAndTarget","slice","probability","_testSetsizeAndTarget","targetAppear","round","targetAbsent","ExArray","Array","fill","concat","GFArray","apply","_testSetsizeAndTarget2","splice","console","log","j","k","createCanvas","timeIntervalPerBlock","initialT","document","getElementById","getContext","width","height","ix","iy","hidden","_waittime","SS","erase","clear","shuffleSS","targetData","makeBackground","makeSearchArray","stimulusData","realX","realY","drawObjects","objects","dT","Date","getTime","thisTime","setSize","makeRectangle","numarrayX","numarrayY","orienVec","colorVec","i","makeCircle","random","find","x","id","thisShape","thisParameterName","thisValue","obj_in_trial","obj_to_append","y","type","trialData","thisAns","checkResp","foo","dT2","rt","trialIsOver","Done","trialConclude","textHeight","font","textWidth","measureText","setTimeout","text","makeText","drawText","postEntry","toString","backToLanding","className","children","format"],"sources":["/Users/pavlov/Documents/GitHub/vss-visual-search/src/pages/game/FITC2.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport CJSWindow from '../../components/gameWindow/cjsWindow/CJSWindow';\nimport useSound from 'use-sound';\nimport clickSoundSrc from '../../assets/sound/click.mp3';\nimport combo2SoundSrc from '../../assets/sound/combo2.mp3';\nimport losingSoundSrc from '../../assets/sound/losingStreak.mp3';\nimport moment from 'moment';\nimport { Shuffle } from '../../scripts/shuffle';\nimport * as vismem from '../../scripts/vismemCC_simon';\nimport CJSButton from '../../components/gameWindow/cjsWindow/cjsButton/CJSButton';\nimport {saveJSONDataToClientDevice } from '../../uitls/offline';\n\nlet myCanvas: HTMLCanvasElement;\nlet canvasContext: CanvasRenderingContext2D;\nlet trialNumber;\nlet currTrial = 0;\nlet backgroundColor = '#E5E5E5';\nlet stimulusColor = ['#9370DB', '#3CB4C6', '#B2D33D', '#F67E4B']; \nlet searchTargetList: any[][] = [\n    [\n        {description: 'สี่เหลี่ยมสีม่วง', color: '#9370DB', shape: 'square'},\n        {description: 'สี่เหลี่ยมสีฟ้า', color: '#3CB4C6', shape: 'square'},\n        {description: 'สี่เหลี่ยมสีเขียว', color: '#B2D33D', shape: 'square'},\n        {description: 'สี่เหลี่ยมสีส้ม', color: '#F67E4B', shape: 'square'},\n    ],\n    [\n        {description: 'วงกลมสีม่วง', color: '#9370DB', shape: 'circle'},\n        {description: 'วงกลมสีฟ้า', color: '#3CB4C6', shape: 'circle'},\n        {description: 'วงกลมสีเขียว', color: '#B2D33D', shape: 'circle'},\n        {description: 'วงกลมสีส้ม', color: '#F67E4B', shape: 'circle'}\n    ],\n    \n]\nlet canvasWidth = 600;\nlet canvasHeight = 600;\nlet squareWidth = 45;\nlet squareHeight = 45;\nlet radius = squareWidth / 2;\nlet positionJitter = 8;\nlet centerX: number;\nlet centerY: number;\nlet Xspan = canvasWidth / 2;\nlet Yspan = canvasHeight / 2;\nlet XblockNumber = 8;\nlet YblockNumber = 6;\nlet Xblock = Xspan * 2 / XblockNumber;\nlet Yblock = Yspan * 2 / YblockNumber;\nlet X: number[]\nlet Y: number[]\nlet Xs: number[] = [];\nlet Ys: number[] = [];\nlet Xtemps: number[] = [];\nlet Ytemps: number[] = [];\nlet posId: number[] = [];\nlet maxSS = Math.floor((XblockNumber * YblockNumber - 1) / 2);\nlet currSS = 2;\nlet initialSetSize = 2; // must have same value as currSS\nlet baselineSetsizeAndTarget: number[][] = [];\nlet allTrialPerBlock: number[][] = [];\nlet testSetsizeAndTarget: number[][] = [];\nlet allSetsizeAndTarget: number[][] = [];\nlet change = NaN;\nlet shapeRand: number[] = [];\nlet ori: number[]\nlet col: string[]\nlet oris: number[] = [];\nlet cols: number[] = [];\nlet checkAns: string[] = [];\nlet thatRight: string = '';\nlet responseText: string = '';\nlet countdownText: string = '0';\nlet timeoutList: any[] = []; \nlet count = 0;\nlet STT;\nlet ET;\nlet allRt: number[] = [];\nlet hitRt: number[] = [];\nlet correctCount = 0;\nlet incorrectCount = 0;\nlet targetMatch: boolean[] = [];\nlet allStartTime: string[] = [];\nlet allClickTime: string[] = [];\nlet allCurrSS: number[] = [];\nlet trialDataResult: any[] = [];\nlet stimulusDataResult: any[] = [];\nlet targetDataResult: any[] = [];\nlet setSizeRecord: any[] = [];\nlet allSearchMode: string[] = [];\nlet version = 'FITC2';\nlet postEntryResult;\n\nfunction FITC2(props): any {\n    const navigate = useNavigate();\n    const [clickSound] = useSound(clickSoundSrc);\n    const [combo2Sound] = useSound(combo2SoundSrc);\n    const [losingSound] = useSound(losingSoundSrc);\n    const [searchTarget, setSearchTarget] = useState<{ shape: number, col: number }>();\n    const [progressValue, setProgressValue] = useState(0);\n    const [disabledButton, setDisabledButton] = useState(false);\n    const [isItDone, setIsItDone] = useState(false);\n\n        useEffect(() => {\n            initiateData();\n            createPseudorandomStimuli();\n            return() => {\n                timeoutList.forEach(tm => {\n                    clearTimeout(tm);\n                })\n            };\n        }, [])\n\n        useEffect(() => {\n            switchSearchMode();\n        }, [searchTarget])\n\n    function initiateData() {\n        hitRt = [];\n        allRt = [];\n        currSS = 2;\n        correctCount = 0;\n        incorrectCount = 0;\n        count = 0;\n        currTrial = 0;\n        Xtemps = [];\n        Xs = [];\n        Ytemps = [];\n        Ys = [];\n        posId = [];\n        trialDataResult = [];\n    }\n\n    function checkStimuliColorSet(){\n        const colorSet = props.userId % 4; \n        if (props.userId % 2 === 0){ // ถ้า userId เป็นเลขคู่\n            if (allSetsizeAndTarget[currTrial][3] ===  0) {\n                setSearchTarget({ shape: 0, col: colorSet });\n            } else {\n                setSearchTarget({ shape: 1, col: (colorSet + 1) % 4 });\n            }\n            \n        } else { // ถ้า userId เป็นเลขคี่\n            if (allSetsizeAndTarget[currTrial][3] ===  1) {\n                setSearchTarget({ shape: 1, col: (colorSet + 1) % 4 });\n            } else {\n                setSearchTarget({ shape: 0, col: colorSet });\n            }\n        }\n    }\n\n    function createPseudorandomStimuli() {\n        baselineSetsizeAndTarget = [];\n        testSetsizeAndTarget = [];\n        allSetsizeAndTarget = [];\n        let allSetsizeRange = [31];\n        let trialsPerSetsize = 80; \n        let targetCondition = 2; // target appear or disappear\n        let trialsPerCondition = trialsPerSetsize / targetCondition; \n        let miniBlocks = 5; // in test blocks \n        let trialsPerBlock = trialsPerSetsize / miniBlocks; // จำนวน trials ต่อ mini-block\n        let probabilities = [0.9, 0.7, 0.5, 0.3, 0.1]; // โอกาสการปรากฏของ 1 ในแต่ละ mini-block\n\n        // conjunction search pre-test\n        for (let iSetsize = 0; iSetsize < allSetsizeRange.length; iSetsize++) {\n            for (let iRep = 0; iRep < trialsPerCondition; iRep++) {\n                for (let iTarget = 0; iTarget < targetCondition; iTarget++) {\n                    // baselineSetsizeAndTarget[0][3] คือชุดของสีที่จะใช้\n                    baselineSetsizeAndTarget.push([allSetsizeRange[iSetsize], iTarget, 1, 0]);\n                    baselineSetsizeAndTarget.push([allSetsizeRange[iSetsize], iTarget, 1, 1]);\n                }\n            }\n        }\n        Shuffle(baselineSetsizeAndTarget); \n\n        // ใส่ baselineSetsizeAndTarget เข้าไปใน allSetsSizeAndTarget\n        allSetsizeAndTarget = [...baselineSetsizeAndTarget];\n\n        // conjunction search 5 mini-blocks \n        // ก่อนจะใส่ testSetsizeAndTarget เช็คให้ชัวร์ก่อนว่า allSetsizeAndTarget ไม่ว่างเปล่า\n        if (allSetsizeAndTarget.length === baselineSetsizeAndTarget.length) {\n            // Block 1 (first 5 mini-blocks)\n            probabilities.slice(0, miniBlocks).forEach(probability => {\n                allTrialPerBlock = [];\n                const targetAppear: number = Math.round(trialsPerBlock * probability); // จำนวนครั้งที่ต้อง push 1\n                const targetAbsent: number = trialsPerBlock - targetAppear; // ที่เหลือเป็น 0\n                \n                // สร้าง array ที่มี 1 และ 0 ตามจำนวนที่คำนวณ ของ ExArray\n                const ExArray: number[] = Array(targetAppear).fill(1).concat(Array(targetAbsent).fill(0));\n                \n                // สร้าง array ที่มี 1 และ 0 ตามจำนวนที่คำนวณ ของ GFArray\n                const GFArray: number[] = Array(targetAppear).fill(0).concat(Array(targetAbsent).fill(1));\n                \n                for (let iSetsize = 0; iSetsize < allSetsizeRange.length; iSetsize++) {\n                    for (let iTarget = 0; iTarget < ExArray.length; iTarget++) {\n                        allTrialPerBlock.push([allSetsizeRange[iSetsize], ExArray[iTarget], 1, 0])\n                        allTrialPerBlock.push([allSetsizeRange[iSetsize], GFArray[iTarget], 1, 1])\n                    }\n                }\n\n                // สุ่มให้คละกัน\n                Shuffle(allTrialPerBlock);\n                testSetsizeAndTarget.push(...allTrialPerBlock);\n            });\n            \n            // Block 2 (next 5 mini-blocks)\n            probabilities.slice(0, miniBlocks).forEach(probability => {\n                allTrialPerBlock = [];\n                const targetAppear: number = Math.round(trialsPerBlock * probability); // จำนวนครั้งที่ต้อง push 1\n                const targetAbsent: number = trialsPerBlock - targetAppear; // ที่เหลือเป็น 0\n\n                // สร้าง array ที่มี 1 และ 0 ตามจำนวนที่คำนวณ ของ ExArray\n                const ExArray: number[] = Array(targetAppear).fill(0).concat(Array(targetAbsent).fill(1));\n    \n                // สร้าง array ที่มี 1 และ 0 ตามจำนวนที่คำนวณ ของ GFArray\n                const GFArray: number[] = Array(targetAppear).fill(1).concat(Array(targetAbsent).fill(0));\n    \n                for (let iSetsize = 0; iSetsize < allSetsizeRange.length; iSetsize++) {\n                    for (let iTarget = 0; iTarget < ExArray.length; iTarget++) {\n                        allTrialPerBlock.push([allSetsizeRange[iSetsize], ExArray[iTarget], 1, 0])\n                        allTrialPerBlock.push([allSetsizeRange[iSetsize], GFArray[iTarget], 1, 1])\n                    }\n                }\n\n                // สุ่มให้คละกัน\n                Shuffle(allTrialPerBlock);\n                testSetsizeAndTarget.push(...allTrialPerBlock);\n            });\n            \n            // ต่อ testSetsizeAndTarget จาก baselineSetsizeAndTarget ใน allSetsizeAndTarget\n            allSetsizeAndTarget.splice(allSetsizeAndTarget.length, 0, ...testSetsizeAndTarget);\n        }\n\n        // กำหนดค่า trialNumber ให้เท่ากับจำนวนข้อทั้งหมด\n        trialNumber = allSetsizeAndTarget.length;\n        checkStimuliColorSet();\n        console.log(allSetsizeAndTarget)\n    }\n\n    function switchSearchMode() {\n        if (searchTarget) {\n            oris = [];\n            cols = [];\n            // conjunction search\n            allSearchMode.push('conjunction search');\n            for (let j = 0; j < maxSS; j++) { oris.push(0); oris.push(1)};\n            if (searchTarget.col === 0) {\n                for (let k = 0; k < maxSS; k++) { cols.push(0); cols.push(2)};\n            } else if (searchTarget.col === 1) {\n                for (let k = 0; k < maxSS; k++) { cols.push(1); cols.push(3)};\n            } else if (searchTarget.col === 2) {\n                for (let k = 0; k < maxSS; k++) { cols.push(2); cols.push(0)};\n            } else if (searchTarget.col === 3) {\n                for (let k = 0; k < maxSS; k++) { cols.push(3); cols.push(1)};\n            }\n            if (searchTarget.shape === 1) {\n                shapeRand = [1];\n            } else {\n                shapeRand = [0];\n            }\n\n            // if createCanvas() runs before switchSearchMode() the target and distractors position might be overlapped\n            if (currTrial === 0){ \n                // create only one time when the game started\n                createCanvas();\n            } else if (currTrial === (trialNumber / 3)){\n                timeIntervalPerBlock();   \n            } else {\n                initialT(0, allSetsizeAndTarget[currTrial][0]);\n            }\n\n        }\n    }\n    \n    function createCanvas() {\n        myCanvas = document.getElementById(\"myCanvas\") as HTMLCanvasElement;\n        canvasContext = myCanvas.getContext(\"2d\") as CanvasRenderingContext2D;\n        centerX = myCanvas.width / 2;\n        centerY = myCanvas.height / 2;\n\n        for (var ix = 0; ix < XblockNumber; ix++) {\n            Xtemps.push(Math.round(Xblock / 2) + Xblock * ix - Xspan + centerX);\n        }\n\n        for (var iy = 0; iy < YblockNumber; iy++) {\n            Ytemps.push(Math.round(Yblock / 2) + Yblock * iy - Yspan + centerY);\n        }\n\n        for (ix = 0; ix < XblockNumber; ix++) {\n            for (iy = 0; iy < YblockNumber; iy++) {\n                Xs.push(Xtemps[ix]);\n                Ys.push(Ytemps[iy]);\n                posId.push(count);\n                count++;\n            }\n        }\n        myCanvas.hidden = false;\n        timeIntervalPerBlock();\n    }\n\n    function initialT(_waittime, SS) {\n        setDisabledButton(false);\n        setSizeRecord.push(SS);\n        vismem.erase(canvasContext);\n        vismem.clear();\n        allCurrSS.push(allSetsizeAndTarget[currTrial][0]);\n        shuffleSS(SS);\n        targetData(squareWidth, ori, col);\n        makeBackground(backgroundColor);\n        makeSearchArray(X, Y, squareWidth, squareHeight, ori, col);\n        stimulusData(realX, realY, squareWidth, ori, col);\n        vismem.drawObjects(canvasContext, vismem.objects);\n        let dT = new Date();\n        STT = dT.getTime();\n        allStartTime.push(thisTime());\n    }\n\n    function shuffleSS(setSize) {\n        Shuffle(posId);\n        X = []; for (let ix = 0; ix < setSize + 1; ix++) { X.push(Xs[posId[ix]]) };\n        Y = []; for (let iy = 0; iy < setSize + 1; iy++) { Y.push(Ys[posId[iy]]) };\n        ori = []; for (let j = 0; j < setSize; j++) { ori.push(oris[j]) };\n        col = []; for (let j = 0; j < setSize; j++) { col.push(stimulusColor[cols[j]]) };\n\n            // conjunction search\n            // check if the target appears or disappears\n            if (allSetsizeAndTarget[currTrial][1] === 0) {\n                // disappears\n                ori.push(oris[setSize]);\n                col.push(stimulusColor[cols[setSize]]);\n            } else {\n                // appears\n                if (oris[setSize] === 0) {\n                    ori.push(1);\n                } else {\n                    ori.push(1);\n                }\n\n                if (cols[setSize] === 0) {\n                    col.push(stimulusColor[2]);\n                } else if (cols[setSize] === 1) {\n                    col.push(stimulusColor[3]);\n                } else if (cols[setSize] === 2) {\n                    col.push(stimulusColor[0]);\n                } else if (cols[setSize] === 3) {\n                    col.push(stimulusColor[1]);\n                }\n            }\n    }\n\n    function makeBackground(backgroundColor) {\n        // Fill background\n        vismem.makeRectangle('bg', centerX, centerY, canvasWidth, canvasHeight, false, backgroundColor, backgroundColor);\n    }\n\n    let realX: number[] = [];\n    let realY: number[] = [];\n    function makeSearchArray(numarrayX, numarrayY, squareWidth, squareHeight, orienVec, colorVec) {\n        for (let i = 0; i < orienVec.length; i++) {\n            if (orienVec[i] === shapeRand[0]) {\n                vismem.makeCircle('c', numarrayX[i] + (Math.random() - 0.5) * 2 * positionJitter, numarrayY[i] + (Math.random() - 0.5) * 2 * positionJitter, radius, false, colorVec[i], colorVec[i]);\n            } else {\n                vismem.makeRectangle('s', numarrayX[i] + (Math.random() - 0.5) * 2 * positionJitter, numarrayY[i] + (Math.random() - 0.5) * 2 * positionJitter, squareHeight, squareWidth, false, colorVec[i], colorVec[i], 0, 0);\n            }\n            realX.push(numarrayX[i] + (Math.random() - 0.5) * 2 * positionJitter);\n            realY.push(numarrayY[i] + (Math.random() - 0.5) * 2 * positionJitter);\n        }\n        if (searchTarget) {\n            // Find Target from Object\n            let find = vismem.objects.find(x => x.id === (searchTarget.shape === 0 ? 's' : 'c') && x.color === stimulusColor[searchTarget.col])\n            change = find ? 1 : 0\n            targetMatch.push(find ? true : false);\n        }\n    }\n    \n    function targetData(width, ori, col) {\n        let thisShape = \"\";\n        let thisParameterName = \"\";\n        let thisValue = 0;\n        let obj_in_trial: any[] = [];\n        let obj_to_append;\n        if (shapeRand[0] === 1) {\n            thisShape = \"circle\";\n                thisParameterName = \"radius\";\n                thisValue = radius;\n            } else {\n                thisShape = \"square\";\n                thisParameterName = \"width\";\n                thisValue = width;\n            }\n\n            if (searchTarget) {\n                obj_to_append = {\n                    \"shape\" : thisShape,\n                    \"shapeParams\" : {\n                        \"parameterName\" : thisParameterName,\n                        \"value\" : thisValue,\n                        \"unit\" : \"px\"\n                    },\n                    \"color\" : stimulusColor[searchTarget.col]\n                }\n                obj_in_trial.push(obj_to_append);\n            }\n        targetDataResult = obj_in_trial[obj_in_trial.length - 1];\n        return targetDataResult;\n    }\n\n    function stimulusData(x, y, width, ori, col) {\n        let thisShape = \"\";\n        let thisParameterName = \"\";\n        let thisValue = 0;\n        let obj_in_trial: any[] = [];\n        \n        for (let i = 0; i < col.length; i++){\n            let obj_to_append;\n            if (ori[i] === shapeRand[0]) {\n                thisShape = \"circle\";\n                thisParameterName = \"radius\";\n                thisValue = radius;\n            } else {\n                thisShape = \"square\";\n                thisParameterName = \"width\";\n                thisValue = width;\n            }\n                obj_to_append = {\n                \"type\" : \"distractor\",\n                \"display\" : {\n                    \"shape\" : thisShape,\n                    \"shapeParams\" : {\n                        \"parameterName\" : thisParameterName,\n                        \"value\" : thisValue,\n                        \"unit\" : \"px\"\n                    },\n                    \"color\" : col[i]\n                },\n                \"position\" : {\n                    \"x\" : {\n                        \"value\" : x[i],\n                        \"unit\" : \"px\"\n                    },\n                    \"y\" : {\n                        \"value\" : y[i],\n                        \"unit\" : \"px\"\n                    }\n                }\n            }   \n            obj_in_trial.push(obj_to_append);\n        }\n        obj_in_trial[obj_in_trial.length - 1].type = \"target\";\n        stimulusDataResult.push(obj_in_trial);\n        return stimulusDataResult;\n    }\n\n    function trialData(targetMatch, allStartTime, allCurrSS, allClickTime, checkAns, stimulusDataResult, allSearchMode){\n        let thisAns;\n        let obj_in_trial: any[] = [];\n        for (let i = 0; i < targetMatch.length; i++){\n            let obj_to_append;\n            if (checkAns[i] === 'right' || checkAns[i] === 'late'){\n                thisAns = true;\n            } else {\n                thisAns = false;\n            }\n            obj_to_append = {\n                \"hasTarget\" : targetMatch[i],\n                \"startTime\" : allStartTime[i],\n                \"setSize\" : allCurrSS[i] + 1,\n                \"answerTime\" : allClickTime[i],\n                \"AnswerBool\" : thisAns,\n                \"stimulusData\" : stimulusDataResult[i],\n                \"mode\" : allSearchMode[i]\n            }\n            obj_in_trial.push(obj_to_append);\n        }\n        trialDataResult.push(obj_in_trial[obj_in_trial.length - 1]);\n        return trialDataResult;\n    }\n    \n    function checkResp(foo) {\n        clickSound();\n        let dT2 = new Date();\n        ET = dT2.getTime();\n        allClickTime.push(thisTime());\n        let rt = ET - STT;\n        allRt.push(rt);\n        if (change === foo) {\n            combo2Sound();\n            thatRight = 'right';\n            checkAns.push(thatRight);\n            hitRt.push(rt);\n            correctCount++;\n        } else {\n            losingSound();\n            thatRight = 'wrong';\n            checkAns.push(thatRight);\n            incorrectCount++;\n        }\n        trialDataResult = trialData(targetMatch, allStartTime, allCurrSS, allClickTime, checkAns, stimulusDataResult, allSearchMode);\n        trialIsOver();\n    }\n\n    function trialIsOver() {\n        vismem.erase(canvasContext);\n        vismem.clear();\n        makeBackground(backgroundColor)\n        vismem.drawObjects(canvasContext, vismem.objects);\n\n        currTrial = currTrial + 1;\n        if (currTrial >= trialNumber) {\n            Done();\n        } else {\n            trialConclude();\n        }\n    }\n    \n    function trialConclude() {\n        setDisabledButton(true);\n        vismem.erase(canvasContext);\n        vismem.clear();\n        makeBackground(backgroundColor);\n        vismem.drawObjects(canvasContext, vismem.objects);\n        \n        let textHeight = 0;\n        if (thatRight === 'wrong'){\n            responseText = \"ผิด\";\n            textHeight = 36;\n        } else {\n            responseText = \"ถูก\";\n            textHeight = 20;\n        }\n\n        canvasContext.font = \"120px Sarabun\"\n        let textWidth = canvasContext.measureText(responseText).width;\n        timeoutList.push(\n            setTimeout(function() {\n                let text = vismem.makeText('t', centerX - textWidth/2, centerY + textHeight, responseText, \"Black\", canvasContext.font);\n                vismem.drawText(canvasContext, text);\n            }, 100),\n\n            setTimeout(function() {\n                vismem.erase(canvasContext);\n                vismem.clear();\n                makeBackground(backgroundColor);\n                vismem.drawObjects(canvasContext, vismem.objects);\n            }, 600),\n\n            setTimeout(function() {\n                checkStimuliColorSet();\n            }, 900)\n        )\n    }\n\n    function timeIntervalPerBlock() {\n        setDisabledButton(true);\n        vismem.erase(canvasContext);\n        vismem.clear();\n        makeBackground(backgroundColor);\n        vismem.drawObjects(canvasContext, vismem.objects);\n        \n        // ทำเพื่อให้ textWidth คำนวนค่าได้ก่อนที่ 3 2 1 จะขึ้น\n        timeoutList.push(\n            setTimeout(function() {\n                countdownText = '0';\n            }, 100) \n        )\n\n        let textHeight = 36;\n        canvasContext.font = \"120px Sarabun\"\n        let textWidth = canvasContext.measureText(countdownText).width;\n        \n        timeoutList.push(\n            setTimeout(function() {\n                countdownText = '3';\n                let text = vismem.makeText('t', centerX - textWidth/2, centerY + textHeight, countdownText, \"Black\", canvasContext.font);\n                vismem.drawText(canvasContext, text);\n            }, 200) \n        )\n\n        timeoutList.push(\n            setTimeout(function() {\n                vismem.erase(canvasContext);\n                vismem.clear();\n                makeBackground(backgroundColor);\n                vismem.drawObjects(canvasContext, vismem.objects);\n            }, 900)\n        )\n    \n        timeoutList.push(\n            setTimeout(function() {\n                countdownText = '2';\n                let text = vismem.makeText('t', centerX - textWidth/2, centerY + textHeight, countdownText, \"Black\", canvasContext.font);\n                vismem.drawText(canvasContext, text);\n            }, 1200)\n        )\n\n        timeoutList.push(\n            setTimeout(function() {\n                vismem.erase(canvasContext);\n                vismem.clear();\n                makeBackground(backgroundColor);\n                vismem.drawObjects(canvasContext, vismem.objects);\n            }, 1900)\n        )\n    \n        timeoutList.push(\n            setTimeout(function() {\n                countdownText = '1';\n                let text = vismem.makeText('t', centerX - textWidth/2, centerY + textHeight, countdownText, \"Black\", canvasContext.font);\n                vismem.drawText(canvasContext, text);\n            }, 2200)\n        )\n\n        timeoutList.push(\n            setTimeout(function() {\n                vismem.erase(canvasContext);\n                vismem.clear();\n                makeBackground(backgroundColor);\n                vismem.drawObjects(canvasContext, vismem.objects);\n            }, 2900)\n        )\n    \n        timeoutList.push(\n            setTimeout(function() {\n                initialT(0, allSetsizeAndTarget[currTrial][0]);\n            }, 3200) \n        )\n    }\n\n    function Done() {\n        setIsItDone(true);\n        postEntryResult = postEntry();\n        console.log(postEntryResult)\n        saveJSONDataToClientDevice(postEntryResult, `Subject${props.userId}_${version}_${thisTime().toString()}`);\n        backToLanding();\n    }\n\n    function postEntry(){\n        postEntryResult = {\n            \"date\" : `${thisTime().toString()}`,\n            \"userId\" : props.userId,\n            \"userSession\" : version,\n            \"target\" : targetDataResult,\n            \"trialData\" : trialDataResult,\n            \"stimuliData\": stimulusDataResult,\n        }\n        return postEntryResult;\n    }\n\n    function backToLanding() {\n        navigate('/landing');\n    }\n\n    return (\n        <div className='h-screen w-full bg-slate-50 flex flex-col'>\n            <div className='flex justify-center items-center flex-grow p-5'>\n                {<CJSWindow searchTarget={searchTarget} searchTargetList={searchTargetList} canvasWidth={canvasWidth} canvasHeight={canvasHeight} />}\n                {<CJSButton searchTarget={searchTarget} disabledButton={disabledButton} checkResp={checkResp}/>}\n            </div>\n        </div>\n    )\n}\n\nexport default FITC2;\n\nfunction thisTime() {\n    let thisTime = moment().format('YYYY-MM-DDTkk:mm:ss.SSSSSS');\n    return thisTime;\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}